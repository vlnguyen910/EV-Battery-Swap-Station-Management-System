## Auth Service

![alt text](image.png)

AuthContext (Global State Layer)
â†“
useAuth (Hook Interface Layer)  
 â†“
useAuthHandlers (Business Logic Layer)
â†“  
AuthContainer (Container Layer)
â†“
Login/Register (Presentation Layer)

ğŸ“‹ Vai trÃ² tá»«ng lá»›p:

1. AuthContext (Global State Management)
   Chá»©c nÄƒng: Quáº£n lÃ½ global auth state cho toÃ n app
   TrÃ¡ch nhiá»‡m:
   LÆ°u trá»¯ user, token, loading, error
   Cung cáº¥p base auth functions (login, logout, register)
   Persist state vá»›i localStorage
   Decode JWT token
   Scope: ToÃ n app (wrap tá»« main.jsx)
2. useAuthHandlers (Business Logic & Side Effects)
   Chá»©c nÄƒng: Xá»­ lÃ½ business logic specific cho login/register
   TrÃ¡ch nhiá»‡m:
   Gá»i AuthContext functions
   Xá»­ lÃ½ role-based navigation
   Handle async states vá»›i useAsyncHandler
   Side effects nhÆ° setTimeout, console.log
   Scope: Component level
3. AuthContainer (UI Container)
   Chá»©c nÄƒng: Orchestrate UI cho auth flow
   TrÃ¡ch nhiá»‡m:
   Chá»n render Login hay Register dá»±a trÃªn mode
   Bridge giá»¯a useAuthHandlers vÃ  presentation components
   Pass props xuá»‘ng UI components
   Scope: Auth pages

## ğŸ”„ Má»‘i quan há»‡ vÃ  Data Flow:

```
User submit form â†’ Login/Register (presentation) â†’ onSubmit(formData) â†’
AuthContainer â†’ useAuthHandlers â†’ useAsyncHandler â†’ AuthContext â†’
authService â†’ API â†’ Response â†’ navigate based on role
```

## ğŸ’¡ Táº¡i sao cáº§n cáº£ hai:

### AuthContext khÃ´ng thá»ƒ thay tháº¿ AuthContainer vÃ¬:

1. **Separation of Concerns**:

```jsx
// AuthContext: Pure state management
const login = async (credentials) => {
  // Just handle API call and state
  const response = await loginService(credentials);
  setUser(userData);
  return userData;
};

// useAuthHandlers: Business logic + side effects
const loginHandler = async (credentials) => {
  const user = await login(credentials); // Gá»i AuthContext
  // Business logic: role-based navigation
  if (user.role === "admin") navigate("/admin");
};
```

2. **Reusability**: AuthContext cÃ³ thá»ƒ dÃ¹ng á»Ÿ nhiá»u nÆ¡i khÃ¡c, khÃ´ng chá»‰ login/register
3. **Testing**: CÃ³ thá»ƒ test AuthContext vÃ  useAuthHandlers riÃªng biá»‡t

### AuthContainer khÃ´ng thá»ƒ thay tháº¿ AuthContext vÃ¬:

1. **Global State**: AuthContext cáº§n share state cho toÃ n app
2. **Persistence**: AuthContext handle localStorage
3. **Token Management**: AuthContext decode JWT vÃ  manage tokens

## ğŸ¯ Káº¿t luáº­n:

**KHÃ”NG Bá» CÃI NÃ€O!** Má»—i lá»›p cÃ³ vai trÃ² riÃªng:

- **AuthContext**: Global state store (nhÆ° Redux store)
- **useAuthHandlers**: Business logic hooks
- **AuthContainer**: UI orchestration
- **Login/Register**: Pure presentation

## ğŸ”§ Analogy dá»… hiá»ƒu:

```
AuthContext = Database (lÆ°u trá»¯ global state)
useAuthHandlers = Service Layer (business logic)
AuthContainer = Controller (Ä‘iá»u phá»‘i UI)
Login/Register = View (hiá»ƒn thá»‹ form)
```

**Kiáº¿n trÃºc nÃ y chuáº©n React patterns vÃ  scalable cho dá»± Ã¡n lá»›n!** ğŸš€

## ğŸ“ Cáº¥u trÃºc file hoÃ n chá»‰nh:

```
src/
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ AuthContext.jsx          # Global state management
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.js               # Hook interface layer
â”‚   â”œâ”€â”€ useAsyncHandler.js       # Generic async state handler
â”‚   â””â”€â”€ useAuthHandlers.js       # Auth-specific business logic
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ containers/
â”‚   â”‚   â””â”€â”€ AuthContainer.jsx    # UI container orchestration
â”‚   â””â”€â”€ auth/
â”‚       â”œâ”€â”€ Login.jsx            # Pure presentation component
â”‚       â””â”€â”€ Register.jsx         # Pure presentation component
â””â”€â”€ services/
    â”œâ”€â”€ api.js                   # HTTP client
    â””â”€â”€ authService.js           # Auth API calls
```

##### SWAGGER and POSTMAN
