{
  "clientName": "Thunder Client",
  "collectionName": "Payment API Tests",
  "collectionId": "payment-api-tests",
  "dateExported": "2025-01-21",
  "version": "1.0",
  "folders": [
    {
      "id": "auth-folder",
      "name": "Authentication",
      "containerId": "",
      "created": "2025-01-21",
      "sortNum": 10000
    },
    {
      "id": "payment-folder",
      "name": "Payment Operations",
      "containerId": "",
      "created": "2025-01-21",
      "sortNum": 20000
    },
    {
      "id": "subscription-folder",
      "name": "Subscription Verification",
      "containerId": "",
      "created": "2025-01-21",
      "sortNum": 30000
    }
  ],
  "requests": [
    {
      "id": "login-request",
      "name": "1. Login (Get Token)",
      "url": "http://localhost:3000/auth/login",
      "method": "POST",
      "sortNum": 10000,
      "created": "2025-01-21",
      "modified": "2025-01-21",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "set-env-var",
          "custom": "json.access_token",
          "action": "setto",
          "value": "{{token}}"
        }
      ]
    },
    {
      "id": "mock-payment-success",
      "name": "2. Mock Payment - Success",
      "url": "http://localhost:3000/payments/mock-payment",
      "method": "POST",
      "sortNum": 20000,
      "created": "2025-01-21",
      "modified": "2025-01-21",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "Authorization",
          "value": "Bearer {{token}}"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"user_id\": 1,\n  \"package_id\": 1,\n  \"vehicle_id\": 1,\n  \"vnp_response_code\": \"00\",\n  \"vnp_bank_code\": \"NCB\",\n  \"vnp_card_type\": \"ATM\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "res-code",
          "custom": "",
          "action": "equal",
          "value": "200"
        },
        {
          "type": "json-query",
          "custom": "json.success",
          "action": "equal",
          "value": "true"
        },
        {
          "type": "json-query",
          "custom": "json.subscription",
          "action": "istype",
          "value": "object"
        }
      ]
    },
    {
      "id": "mock-payment-cancelled",
      "name": "3. Mock Payment - Cancelled",
      "url": "http://localhost:3000/payments/mock-payment",
      "method": "POST",
      "sortNum": 20100,
      "created": "2025-01-21",
      "modified": "2025-01-21",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "Authorization",
          "value": "Bearer {{token}}"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"user_id\": 1,\n  \"package_id\": 1,\n  \"vnp_response_code\": \"24\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "res-code",
          "custom": "",
          "action": "equal",
          "value": "200"
        },
        {
          "type": "json-query",
          "custom": "json.success",
          "action": "equal",
          "value": "false"
        },
        {
          "type": "json-query",
          "custom": "json.subscription",
          "action": "equal",
          "value": "null"
        }
      ]
    },
    {
      "id": "mock-payment-failed",
      "name": "4. Mock Payment - Failed (Wrong OTP)",
      "url": "http://localhost:3000/payments/mock-payment",
      "method": "POST",
      "sortNum": 20200,
      "created": "2025-01-21",
      "modified": "2025-01-21",
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        },
        {
          "name": "Authorization",
          "value": "Bearer {{token}}"
        }
      ],
      "body": {
        "type": "json",
        "raw": "{\n  \"user_id\": 1,\n  \"package_id\": 1,\n  \"vnp_response_code\": \"13\",\n  \"vnp_bank_code\": \"NCB\"\n}",
        "form": []
      },
      "tests": [
        {
          "type": "json-query",
          "custom": "json.success",
          "action": "equal",
          "value": "false"
        },
        {
          "type": "json-query",
          "custom": "json.payment.status",
          "action": "equal",
          "value": "failed"
        }
      ]
    },
    {
      "id": "get-payment-by-id",
      "name": "5. Get Payment by ID",
      "url": "http://localhost:3000/payments/1",
      "method": "GET",
      "sortNum": 20300,
      "created": "2025-01-21",
      "modified": "2025-01-21",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{token}}"
        }
      ],
      "tests": [
        {
          "type": "res-code",
          "custom": "",
          "action": "equal",
          "value": "200"
        }
      ]
    },
    {
      "id": "get-payment-history",
      "name": "6. Get User Payment History",
      "url": "http://localhost:3000/payments/user/1",
      "method": "GET",
      "sortNum": 20400,
      "created": "2025-01-21",
      "modified": "2025-01-21",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{token}}"
        }
      ],
      "tests": [
        {
          "type": "res-code",
          "custom": "",
          "action": "equal",
          "value": "200"
        },
        {
          "type": "json-query",
          "custom": "json",
          "action": "istype",
          "value": "array"
        }
      ]
    },
    {
      "id": "get-active-subscriptions",
      "name": "7. Get Active Subscriptions",
      "url": "http://localhost:3000/subscriptions/user/1/active",
      "method": "GET",
      "sortNum": 30000,
      "created": "2025-01-21",
      "modified": "2025-01-21",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{token}}"
        }
      ],
      "tests": [
        {
          "type": "res-code",
          "custom": "",
          "action": "equal",
          "value": "200"
        },
        {
          "type": "json-query",
          "custom": "json",
          "action": "istype",
          "value": "array"
        }
      ]
    },
    {
      "id": "get-all-subscriptions",
      "name": "8. Get All User Subscriptions",
      "url": "http://localhost:3000/subscriptions/user/1",
      "method": "GET",
      "sortNum": 30100,
      "created": "2025-01-21",
      "modified": "2025-01-21",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{token}}"
        }
      ],
      "tests": []
    }
  ]
}
