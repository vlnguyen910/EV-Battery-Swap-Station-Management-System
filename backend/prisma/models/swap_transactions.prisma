enum SwapTransactionStatus {
    completed
    failed
    cancelled
}

model SwapTransaction {
    transaction_id      Int                   @id @default(autoincrement())
    user_id             Int
    vehicle_id          Int
    station_id          Int
    battery_taken_id    Int
    battery_returned_id Int?
    subscription_id     Int
    createAt            DateTime              @default(now())
    updateAt            DateTime              @updatedAt
    status              SwapTransactionStatus

    // Relationships
    user             User         @relation(fields: [user_id], references: [user_id])
    vehicle          Vehicle      @relation(fields: [vehicle_id], references: [vehicle_id])
    station          Station      @relation(fields: [station_id], references: [station_id])
    battery_taken    Battery      @relation("BatteryTaken", fields: [battery_taken_id], references: [battery_id])
    battery_returned Battery?     @relation("BatteryReturned", fields: [battery_returned_id], references: [battery_id])
    subscription     Subscription @relation(fields: [subscription_id], references: [subscription_id])

    @@map("swap_transactions")
}
